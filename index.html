<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fixed Travel Inputs</title>
    
    <link rel="stylesheet" href="https://unpkg.com/@geoapify/geocoder-autocomplete@1.6.0/styles/minimal.css">
    
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica; padding: 20px; background: #f0f2f5; }
        .card { background: white; padding: 25px; border-radius: 15px; max-width: 400px; margin: 40px auto; box-shadow: 0 8px 30px rgba(0,0,0,0.1); }
        .autocomplete-container { position: relative; margin-bottom: 20px; min-height: 45px; }
        .travel-btn { width: 100%; padding: 15px; background: #007aff; color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 1rem; }
        label { display: block; margin-bottom: 8px; font-size: 0.75rem; color: #888; letter-spacing: 0.5px; }
        h2 { margin-top: 0; color: #1c1c1e; }
    </style>
</head>
<body>

<div class="card">
    <h2>Road Trip</h2>

    <label>STARTING FROM</label>
    <div id="origin-box" class="autocomplete-container"></div>
    
    <label>DESTINATION</label>
    <div id="destination-box" class="autocomplete-container"></div>
    
    <button class="travel-btn" onclick="checkJourney()">Travel!</button>
</div>

<script src="https://unpkg.com/@geoapify/geocoder-autocomplete@1.6.0/dist/index.bundle.min.js"></script>

<script>
    const MY_API_KEY = "bb34a64a008b4c2f89ac485d4f09f7c7"; 
    let startPoint = "";
    let endPoint = "";

    // This waits for the library and the page to be 100% ready
    window.addEventListener('load', function() {
        
        // Safety Check: Verify if library loaded
        if (typeof autocomplete === 'undefined') {
            console.error("The Geoapify library failed to load. Check your internet.");
            return;
        }

        // Initialize Origin
        const originField = new autocomplete.GeocoderAutocomplete(
            document.getElementById("origin-box"), 
            MY_API_KEY, 
            { placeholder: "Search starting city...", filter: { countrycode: ["my"] } }
        );

        // Initialize Destination
        const destinationField = new autocomplete.GeocoderAutocomplete(
            document.getElementById("destination-box"), 
            MY_API_KEY, 
            { placeholder: "Search destination...", filter: { countrycode: ["my"] } }
        );

        originField.on('select', (location) => {
            if (location) startPoint = location.properties.formatted;
        });

        destinationField.on('select', (location) => {
            if (location) endPoint = location.properties.formatted;
        });
    });

    function checkJourney() {
        if (!startPoint || !endPoint) {
            alert("Please select locations from the dropdown menu!");
        } else {
            alert("Success! Starting from: " + startPoint + "\nEnding at: " + endPoint);
        }
    }
</script>

</body>
</html>
