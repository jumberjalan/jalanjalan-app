<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Basic Travel Inputs</title>
    
    <link rel="stylesheet" href="https://unpkg.com/@geoapify/geocoder-autocomplete@^1/styles/minimal.css">
    <script src="https://unpkg.com/@geoapify/geocoder-autocomplete@^1/dist/index.bundle.min.js"></script>

    <style>
        body { font-family: sans-serif; padding: 40px; background: #f4f4f9; }
        .form-card { background: white; padding: 20px; border-radius: 12px; max-width: 400px; margin: auto; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        /* IMPORTANT: The containers must have relative positioning */
        .autocomplete-container { position: relative; margin-bottom: 20px; height: 45px; }
        
        .travel-btn { 
            width: 100%; padding: 15px; background: #007aff; color: white; 
            border: none; border-radius: 8px; font-weight: bold; cursor: pointer; 
        }
        label { display: block; margin-bottom: 5px; font-size: 0.8rem; color: #666; font-weight: bold; }
    </style>
</head>
<body>

<div class="form-card">
    <h2>Where to?</h2>

    <label>FROM</label>
    <div id="origin-box" class="autocomplete-container"></div>
    
    <label>TO</label>
    <div id="destination-box" class="autocomplete-container"></div>
    
    <button class="travel-btn" onclick="checkInputs()">Travel!</button>
</div>

<script>
    // Replace with your actual key
    const MY_API_KEY = "bb34a64a008b4c2f89ac485d4f09f7c7"; 

    // Variables to store what the user picks
    let startPoint = "";
    let endPoint = "";

    // 2. Initialize the fields only AFTER the page loads
    window.onload = function() {
        
        // Setup Origin Field
        const originField = new autocomplete.GeocoderAutocomplete(
            document.getElementById("origin-box"), 
            MY_API_KEY, 
            { placeholder: "Type starting city...", filter: { countrycode: ["my"] } }
        );

        // Setup Destination Field
        const destinationField = new autocomplete.GeocoderAutocomplete(
            document.getElementById("destination-box"), 
            MY_API_KEY, 
            { placeholder: "Type destination...", filter: { countrycode: ["my"] } }
        );

        // Listen for selections
        originField.on('select', (location) => {
            if (location) startPoint = location.properties.formatted;
        });

        destinationField.on('select', (location) => {
            if (location) endPoint = location.properties.formatted;
        });
    };

    function checkInputs() {
        if (!startPoint || !endPoint) {
            alert("Please pick both locations from the suggestion list!");
        } else {
            alert("Ready to go from " + startPoint + " to " + endPoint + "!");
        }
    }
</script>

</body>
</html>
